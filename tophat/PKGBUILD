# Maintainer: Thiago Yukio Kikuchi Oliveira <stratust@gmail.com>

pkgname=tophat
pkgver=1.4.0
pkgrel=1
pkgdesc="TopHat is a fast splice junction mapper for RNA-Seq reads."
arch=("x86_64")
url="http://tophat.cbcb.umd.edu"
license=('Artistic')
depends=('python2' 'samtools' 'bowtie' 'perl')
source=(http://tophat.cbcb.umd.edu/downloads/$pkgname-$pkgver.tar.gz)
md5sums=('65d437628e8caa1df6804fd2a8cfbeaf')

build() {
  cd $srcdir/$pkgname-$pkgver

  # Tophat use python2 but archlinux uses python3 as default python
  perl -i -pne '$_ =~ s/python/python2/ if $_ =~ /^#!\/usr/' src/tophat 
  perl -i -pne '$_ =~ s/python/python2/ if $_ =~ /^#!\/usr/' src/bed_to_juncs


  ./configure --prefix="$pkgdir/usr"
  make
  make install

}
