# Maintainer: Thiago Yukio Kikuchi Oliveira <stratust@gmail.com>

pkgname=cufflinks
pkgver=2.0.0
pkgrel=1
pkgdesc="Cufflinks assembles transcripts, estimates their abundances, and tests for differential expression and regulation in RNA-Seq samples.."
arch=("x86_64")
url="http://cufflinks.cbcb.umd.edu"
license=('Artistic')
depends=('boost' 'python2' 'samtools' 'perl')
source=(http://cufflinks.cbcb.umd.edu/downloads/$pkgname-$pkgver.tar.gz)
md5sums=('579ad62a8510f37882ffa3df3bd9d500')

build() {
  cd $srcdir/$pkgname-$pkgver

  # cufflinks use python2 but archlinux uses python3 as default python
  perl -i -pne '$_ =~ s/python/python2/ if $_ =~ /^#!\/usr/' src/cuffmerge 

  export MAKEFLAGS="-j1"

  #./configure --prefix="$pkgdir/usr" CC=gcc-4.4 CXX=g++-4.4 
  ./configure --prefix="$pkgdir/usr" --with-eigen=/usr/include/eigen3/Eigen
  
  # I had problems compiling with -j higher than one
  make
  make install

}
